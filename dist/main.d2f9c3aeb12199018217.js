(()=>{"use strict";var e="";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const o=new Uint8Array(16),r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));const a=function(e,a,i){if(t.randomUUID&&!a&&!e)return t.randomUUID();const s=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(o)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,a){if((i=i||0)<0||i+16>a.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[i+e]=s[e];return a}return function(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}(s)},i=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Lago di Braies"}];class s{constructor(e,t,n){this._data=e,this._templateSelector=t,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._data.link,e.alt=this._data.name,this._element.querySelector(".card__title").textContent=this._data.name,this._setEventListeners(),this._element}_handleLikeClick(){this._element.querySelector(".card__heart").classList.toggle("card__heart_active")}_handleDeleteClick(){this._element.remove()}_setEventListeners(){this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._data)})),this._element.querySelector(".card__heart").addEventListener("click",(()=>{this._handleLikeClick()})),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick()}))}}class l{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}_showInputError(e,t){const n=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._config.inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._config.inactiveButtonClass))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}}const c=e+"8ec5e3f3631a809fd255.jpg",d=e+"4e8e0a1d604782a0dff8.svg";document.querySelector(".header__logo").src=d,document.querySelector(".profile__image").src=c,document.querySelector(".header__logo").addEventListener("load",(()=>{})),document.querySelector(".profile__image").addEventListener("load",(()=>{}));const u=document.querySelector("#cards-container"),m=document.getElementById("add-modal"),_=document.forms["add-form"],h=_.querySelector("#place"),p=_.querySelector("#link"),f=document.getElementById("edit-modal"),g=document.querySelector("#name"),y=document.querySelector("#about"),v=document.querySelector(".profile__name"),E=document.querySelector(".profile__about"),L=document.querySelector(".profile__add-button"),S=document.querySelector(".profile__edit-button"),k=document.querySelector(".modal__image"),b=document.querySelector(".modal__caption"),w=document.querySelector("#image-modal");function q(e){k.src=e.link,k.alt=e.name,b.textContent=e.name,V(w)}S.addEventListener("click",(()=>{g.value=v.textContent,y.value=E.textContent,V(f)}));const C={};var I;function B(e){e.classList.remove("modal_open"),e.classList.add("modal_hidden"),document.removeEventListener("keydown",j),e===m&&_.reset()}function V(e){e.classList.remove("modal_hidden"),e.classList.add("modal_open"),e===m?C["card-form"].resetValidation():e===f&&C["profile-form"].resetValidation(),document.addEventListener("keydown",j)}function j(e){if("Escape"===e.key){const e=document.querySelector(".modal_open");e&&B(e)}}function U(e){return new s(e,"#card-template",q).generateCard()}I={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input-type-error",errorClass:"modal__input-error_visible"},Array.from(document.querySelectorAll(I.formSelector)).forEach((e=>{const t=new l(I,e),n=e.getAttribute("name");C[n]=t,t.enableValidation()})),_.addEventListener("submit",(e=>{e.preventDefault();const t=U({name:h.value,link:p.value,alt:h.value,id:a()});u.prepend(t),_.reset(),C["card-form"].resetValidation(),B(m)})),document.querySelector("#edit-form").addEventListener("submit",(e=>{e.preventDefault(),v.textContent=g.value,E.textContent=y.value,B(f)})),L.addEventListener("click",(()=>{V(m)})),document.querySelectorAll(".modal__close-button").forEach((e=>{e.addEventListener("click",(()=>{B(e.closest(".modal"))}))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&B(e)}))})),document.addEventListener("DOMContentLoaded",(()=>{i.forEach((e=>{const t=U(e);u.append(t)}))})),window.addEventListener("load",(()=>{}))})();